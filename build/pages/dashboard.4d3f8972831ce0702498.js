webpackJsonp([1],{"0hNx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=d(a("Dd8w")),n=d(a("M4fF")),o=(d(a("Qx8R")),a("NYxO")),r=d(a("GLTl")),i=d(a("h73+")),c=a("pnVp"),l=a("uotZ"),u=d(a("mw3O"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{NavBar:r.default,Balance:i.default},middleware:"authenticated",methods:{formatDate:function(t){return new Date(t).toLocaleString()},truncateAddress:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.slice(0,7)+"..."+t.slice(-7)},loadPayments:function(){var t=this;return this.loadingPayments=!0,c.server.payments().forAccount(this.account.address).order("desc").limit(10).call().then(function(e){t.payments=n.default.map(e.records,function(e){return function(t,e){if("create_account"===t.type&&(t.from=t.funder,t.to=t.account,t.amount=t.starting_balance),"account_merge"===t.type)t.direction=t.account===e?"out":"in",t.display_address=t.account===e?t.into:t.account,t.direction,t.display_amount="[account merge]";else{t.direction=t.from===e?"out":"in",t.display_address=t.from===e?t.to:t.from;var a="in"===t.direction?"+":"-",s=new l.BigNumber(t.amount).toFormat();t.display_amount=""+a+s,t.asset_code?t.display_asset_code=t.asset_code:t.display_asset_code="XLM"}return t.link=t._links.self.href,t}(e,t.account.address)}),t.payments.length>=10&&(t.showLengthLimit=!0)}).catch(function(e){if("NotFoundError"!==e.name)throw e;setTimeout(function(){t.loadPayments()},1e4)}).finally(function(){t.loadingPayments=!1})},createTransaction:function(t){t.preventDefault(),this.$router.push("/transaction?"+u.default.stringify(this.transfer))}},created:function(){this.account?this.loadPayments():console.error("account not loaded")},data:function(){return{showTransactionView:!1,showLengthLimit:void 0,loadingPayments:void 0,payments:[],transfer:{to:void 0,amount:void 0,memo:void 0,memoType:void 0}}},computed:(0,s.default)({},(0,o.mapGetters)(["account"]),{memoPlaceholder:function(){switch(this.transfer.memoType||"MEMO_TEXT"){case"MEMO_ID":return"Enter memo ID number";case"MEMO_TEXT":return"Up to 28 characters";case"MEMO_HASH":case"MEMO_RETURN":return"Enter 64 character encoded string"}}})}},Fs7Z:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("NavBar",{attrs:{account:t.account}}),a("Balance"),a("div",{staticClass:"text-center sendLumens"},[t.showTransactionView?t._e():a("button",{staticClass:"s-button",on:{click:function(e){t.showTransactionView=!0}}},[t._v("Send Lumens »")]),t.showTransactionView?a("button",{staticClass:"closeBtn",staticStyle:{float:"right"},on:{click:function(e){t.showTransactionView=!1}}},[t._v("×")]):t._e()]),t.showTransactionView?a("form",{staticClass:"sendPane",on:{submit:t.createTransaction}},[a("h2",{staticClass:"sendPane__title text-center"},[t._v("Send lumens")]),a("div",{staticClass:"sendSetup"},[a("p",{staticClass:"sendSetup__titleBar"},[t._v("To")]),a("div",{staticClass:"sendSetup__destination"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.transfer.to,expression:"transfer.to"}],staticClass:"sendSetup__destination__input",attrs:{placeholder:"Recipient's public key",type:"text",required:""},domProps:{value:t.transfer.to},on:{input:function(e){e.target.composing||t.$set(t.transfer,"to",e.target.value)}}})]),t.transfer.addressErrors?a("div",{staticClass:"s-alert s-alert--alert sendSetup__error"}):t._e(),a("p",{staticClass:"sendSetup__titleBar"},[t._v("Amount")]),a("div",{staticClass:"s-inputGroup sendSetup__amount"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.transfer.amount,expression:"transfer.amount"}],staticClass:"s-inputGroup__item",class:{"s-inputAlert--alert":t.transfer.amountErrors},attrs:{type:"text",placeholder:"Amount to send",required:""},domProps:{value:t.transfer.amount},on:{input:function(e){e.target.composing||t.$set(t.transfer,"amount",e.target.value)}}}),a("span",{staticClass:"s-inputGroup__item s-inputGroup__item--tag sendSetup__amount__tag"},[t._v("\n          lumens\n        ")])]),t.transfer.amountErrors?a("div",{staticClass:"s-alert s-alert--alert sendSetup__error"}):t._e(),a("div",{staticClass:"sendSetup__memo"},[t._m(0),a("div",{staticClass:"s-inputGroup sendSetup__memo__memoSetup"},[a("div",{staticClass:"so-dropdown sendSetup__memo__memoSetup__dropdown"},[a("span",{staticClass:"s-inputGroup__item s-inputGroup__item--tag sendSetup__memo__memoSetup__selectTag"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.transfer.memoType,expression:"transfer.memoType"}],staticClass:"sendSetup__memo__memoSetup__selectTag__select so-dropdown__select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.transfer,"memoType",e.target.multiple?a:a[0])}}},[a("option",[t._v("MEMO_TEXT")]),a("option",[t._v("MEMO_ID")]),a("option",[t._v("MEMO_HASH")]),a("option",[t._v("MEMO_RETURN")])])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.transfer.memo,expression:"transfer.memo"}],staticClass:"sendSetup__memo__memoSetup__input",attrs:{placeholder:t.memoPlaceholder,type:"text"},domProps:{value:t.transfer.memo},on:{input:function(e){e.target.composing||t.$set(t.transfer,"memo",e.target.value)}}})])]),a("button",{staticClass:"s-button sendSetup__submit",attrs:{type:"submit"}},[t._v("Create Transaction")])])]):t._e(),a("div",{staticClass:"so-chunk payments-list"},[a("h2",{staticClass:"history__title uk-visible@s"},[t._v("Transaction History")]),t.payments.length>0?a("div",{staticClass:"history__table"},[a("table",{staticClass:"historyTable"},[t._m(1),t._l(t.payments,function(e){return a("tr",{key:e.id,staticClass:"historyTable__row historyTable__row--data"},[a("td",{staticClass:"historyTable__cell historyTable__accountID"},[t._v("\n            "+t._s(t.truncateAddress(e.display_address))),a("br"),a("small",[t._v(t._s(t.formatDate(e.created_at)))])]),a("td",{staticClass:"historyTable__cell historyTable__amount"},[a("code",{class:{historyTable__amount__number:!0,"historyTable__amount__number--credit":"in"==e.direction,"historyTable__amount__number--debit":"out"==e.direction}},[t._v(t._s(e.display_amount))]),a("code",{staticClass:"historyTable__amount__code"},[t._v(t._s(e.display_asset_code))])])])})],2)]):t._e(),t.showLengthLimit?a("h3",{staticClass:"text-center"},[t._v("...")]):t._e(),0==t.payments.length?a("div",{staticClass:"history__table"},[t.loadingPayments?a("div",[t._v("Loading...")]):t._e(),t.loadingPayments?t._e():a("div",[t._v("No payments yet...")])]):t._e()])],1)};s._withStripped=!0;var n={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"sendSetup__titleBar"},[this._v("Memo\n        "),e("span",{staticClass:"sendSetup__titleBar__side"},[e("a",{attrs:{href:"https://www.stellar.org/developers/learn/concepts/transactions.html#memo",target:"_blank"}},[this._v("what's a memo?")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"historyTable__row historyTable__row--header"},[e("th",{staticClass:"historyTable__cell"},[this._v("Account ID")]),e("th",{staticClass:"historyTable__cell"},[this._v("Amount")])])}]};e.a=n},GLTl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("QxtO"),n=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);var r=a("Y3xP"),i=!1;var c=function(t){i||a("d6rc")},l=a("VU/8")(n.a,r.a,!1,c,null,null);l.options.__file="components/NavBar.vue",e.default=l.exports},QxtO:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=a("bdDp");(s=n)&&s.__esModule;e.default={name:"NavBar",props:["account"],methods:{truncateAddress:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.slice(0,6)+"..."+t.slice(-6)},logout:function(){this.$store.commit("logout"),this.$router.push("/")}}}},Y3xP:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"so-back"},[a("div",{staticClass:"so-chunk"},[a("div",{staticClass:"so-siteHeader siteHeader"},[t._m(0),t.account?a("span",{staticClass:"uk-hidden@s"},[t._v(t._s(t.truncateAddress(t.account.address)))]):t._e(),t.account?a("span",{staticClass:"so-siteHeader__simpleAlign",staticStyle:{float:"right","font-size":"16px"}},[a("a",{attrs:{href:"#"},on:{click:t.logout}},[t._v("Sign out")])]):t._e()])])])};s._withStripped=!0;var n={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"so-logo uk-visible@s"},[e("a",{staticClass:"so-logo__main"},[e("img",{staticClass:"logo",attrs:{src:"/images/logo.png"}})])])}]};e.a=n},YxUP:function(t,e,a){var s=a("iC3/");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("fabdb3f2",s,!1,{sourceMap:!1})},Zrlr:function(t,e,a){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},aBlc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=a("Dd8w"),o=(s=n)&&s.__esModule?s:{default:s},r=a("pnVp"),i=a("NYxO");e.default={data:function(){return{balanceFeed:void 0,showRefreshButton:void 0,accountNotFound:void 0}},mounted:function(){this.account&&this.loadBalance(this.account)},beforeDestroy:function(){this.closeFeed&&this.closeFeed()},methods:{loadBalance:function(t){var e=this;if(!t)throw"account not ready";this.balanceFeed=(0,r.createBalanceFeed)(this.$store,{onBalanceChange:function(t){e.accountNotFound=null===t},onStreamError:function(t){"EventSource not supported"===t&&(e.showRefreshButton=!0)}}),this.closeFeed=this.balanceFeed.start(t.address),(0,r.streamPrice)(this.$store)},loadAccount:function(){this.balanceFeed&&this.account&&this.balanceFeed.loadAccount(this.account.address)}},watch:{account:function(t,e){t&&t!=e&&this.loadBalance(t)}},computed:(0,o.default)({},(0,i.mapGetters)(["account","balance","xlmPrice"]),{usdValue:function(){if(this.account)return this.$store.getters.usdValue(this.balance.balance)}})}},d6rc:function(t,e,a){var s=a("iFRm");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("4621fd42",s,!1,{sourceMap:!1})},"h73+":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("w6Cz"),n=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);var r=a("wUYI"),i=a("VU/8")(n.a,r.a,!1,null,null,null);i.options.__file="components/Balance.vue",e.default=i.exports},"iC3/":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".dashboardOverviewRow{margin:0}.dashboardOverviewBack{padding-top:1.5em;padding-bottom:1.5em}.dashboardOverviewRow:not(:first-child){margin-top:1em}.payments-list{margin-top:25px}.historyTable{min-width:0;width:100%}.history__table,.history__title,.historyTable__cell{text-align:center}.sendSetup{max-width:none;padding:0 36px}.sendLumens{margin-top:25px;margin-bottom:15px}.closeBtn{border-radius:2px;font-size:20px}",""])},iFRm:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,".logo{height:24px;vertical-align:middle}.so-siteHeader{padding:10px 0}",""])},pnVp:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BalanceFeed=e.server=void 0;var s=u(a("Zrlr")),n=u(a("wxAW"));e.switchNetwork=function(t){t==_?(e.server=p=new o.default.Server(_),r.default.setItem("pay.meta.re::network",_)):(e.server=p=new o.default.Server(m),r.default.setItem("pay.meta.re::network",m))},e.createBalanceFeed=function(t,e){v?v.setOptions(e):v=new f(t,e);return v},e.streamPrice=function(t){var e=function(){return i.default.get(d).then(function(e){var a=e.data[0];t.commit("priceUpdate",a)}).catch(console.error)};h||(h=setInterval(e,6e5));e()};var o=u(a("Qx8R")),r=u(a("bdDp")),i=u(a("mtWM")),c=u(a("M4fF")),l=a("uotZ");u(a("vdRI"));function u(t){return t&&t.__esModule?t:{default:t}}var d="https://api.coinmarketcap.com/v1/ticker/stellar/",_="https://horizon.stellar.org",m="https://horizon-testnet.stellar.org",p=e.server=void 0;r.default.getItem("pay.meta.re::network").then(function(t){e.server=p=new o.default.Server(t||_)});var f=e.BalanceFeed=function(){function t(e,a){(0,s.default)(this,t),this.store=e,this.setOptions(a),this.accountAddress=void 0}return(0,n.default)(t,[{key:"setOptions",value:function(t){this.options=t||{}}},{key:"start",value:function(t){return this.accountAddress=t,p.accounts().accountId(t).stream({onmessage:this.onmessage.bind(this),onerror:this.onStreamError.bind(this)})}},{key:"loadAccount",value:function(t){var e=this;p.loadAccount(t).then(function(t){return e.onBalanceChange(t.balances)}).catch(function(t){if("NotFoundError"!==t.name)throw t;e.onBalanceChange(null)})}},{key:"onBalanceChange",value:function(t){this.options.onBalanceChange&&this.options.onBalanceChange(t);var e=void 0;if(c.default.isArray(t)&&t.length>0){var a=(0,c.default)(t).find(function(t){return"native"===t.asset_type});e=a?a.balance:0}else e=0;this.store.commit("balanceUpdate",{balance:e,balanceDisplay:new l.BigNumber(e).toFormat()})}},{key:"onStreamError",value:function(t){this.options.onStreamError&&this.options.onStreamError(t),this.loadAccount(this.accountAddress)}},{key:"onmessage",value:function(t){this.onBalanceChange(t.balances)}}]),t}(),v=void 0;var h=void 0;o.default.Network.useTestNetwork()},uODE:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("0hNx"),n=a.n(s);for(var o in s)"default"!==o&&function(t){a.d(e,t,function(){return s[t]})}(o);var r=a("Fs7Z"),i=!1;var c=function(t){i||a("YxUP")},l=a("VU/8")(n.a,r.a,!1,c,null,null);l.options.__file="pages/dashboard.vue",e.default=l.exports},w6Cz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=a("aBlc"),o=(s=n)&&s.__esModule?s:{default:s};e.default={mixins:[o.default]}},wUYI:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"so-back dashboardOverviewBack"},[t.account&&t.balance?a("div",{staticClass:"so-chunk"},[a("div",{staticClass:"dashboardOverviewRow"},[a("p",{staticClass:"dashboardOverviewRow__label"},[t._v("Your balance:")]),a("p",{staticClass:"dashboardOverviewRow__text"},[t._v(t._s(t.balance.balanceDisplay||"...")+" lumens")]),t.xlmPrice?a("div",[t._v("~ $"+t._s(t.usdValue)+" USD "),a("span",[t._v("("+t._s(t.xlmPrice)+" XLM/USD)")])]):t._e(),t.showRefreshButton?a("div",[a("button",{staticClass:"s-button",on:{click:t.loadAccount}},[t._v("Refresh balance")])]):t._e()]),a("div",{staticClass:"dashboardOverviewRow uk-visible@s"},[a("p",{staticClass:"dashboardOverviewRow__label"},[t._v("Your Stellar public key:")]),a("p",{staticClass:"dashboardOverviewRow__text",staticStyle:{"font-size":"100%"}},[t._v(t._s(t.account.address))])])]):t._e(),t.accountNotFound?a("div",{staticClass:"so-back"},[t._m(0)]):t._e()])};s._withStripped=!0;var n={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"so-chunk"},[e("div",{staticClass:"accountUnfunded"},[e("div",{staticClass:"s-alert s-alert--warning accountUnfunded__alert"},[this._v("\n          This account doesn't exist on the network. To create this account, send it at least 1 lumen (XLM) to fulfill the "),e("a",{attrs:{href:"https://www.stellar.org/developers/learn/concepts/fees.html#minimum-balance",target:"_blank"}},[this._v("minimum balance")]),this._v(".\n        ")])])])}]};e.a=n},wxAW:function(t,e,a){"use strict";e.__esModule=!0;var s,n=a("C4MV"),o=(s=n)&&s.__esModule?s:{default:s};e.default=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,o.default)(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}()}});