webpackJsonp([1],{"67AM":function(t,e,n){var s=n("Ufq7");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);n("rjj0")("5129fd84",s,!1,{sourceMap:!1})},EPgg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionError=void 0;var s=l(n("Xxa5")),a=l(n("exGp")),i=l(n("Zrlr")),r=l(n("wxAW")),o=l(n("OvRC")),c=n("Qx8R"),u=n("pnVp"),d=n("uotZ");function l(t){return t&&t.__esModule?t:{default:t}}var m=e.TransactionError=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.name="TransactionError",this.type=e.type,this.message=t,this.description=e.description,this.stack=(new Error).stack,this.context=e.context};m.prototype=(0,o.default)(Error.prototype);var _=function(){function t(e,n){var s=n.to,a=n.amount,r=n.memo,o=n.memoType,c=void 0===o?"MEMO_TEXT":o;(0,i.default)(this,t),this.account=e,this.loadedAccount=void 0,this.lastTransactionXDR=void 0,this.destination=s,this.amount=a,this.memo=r,this.memoType=c}return(0,r.default)(t,[{key:"checkMinimumBalance",value:function(t){this.loadedAccount=t;var e=1+.5*t.subentry_count,n=t.balances.find(function(t){return"native"===t.asset_type}).balance,s=new d.BigNumber(n).minus(e);if(s.lt(this.amount))throw new m("Insufficient balance.",{description:'To maintain your <a href="https://www.stellar.org/developers/learn/concepts/fees.html#minimum-balance" target="_blank">minimum balance</a>, the most you can currently send is '+s+"."})}},{key:"checkDestinationExists",value:function(){if(!new d.BigNumber(this.amount).gte(1))return u.server.loadAccount(this.destination).catch(function(t){throw"NotFoundError"===t.name?new m("Destination account doesn't exist.",{description:"You account must send at least 1 lumens to create an account."}):t})}},{key:"formatMemo",value:function(){var t=c.Memo.none();if(void 0!==this.memo&&null!==this.memo)switch(this.memoType){case"MEMO_TEXT":t=c.Memo.text(this.memo);break;case"MEMO_ID":t=c.Memo.id(this.memo);break;case"MEMO_HASH":t=c.Memo.hash(this.memo);break;case"MEMO_RETURN":t=c.Memo.returnHash(this.memo)}return t}},{key:"validate",value:function(){if(!this.destination)return!1;try{c.Keypair.fromPublicKey(this.destination)}catch(t){throw new m("Stellar address or public key is invalid.",{description:'Public keys are uppercase and begin with the letter "G."'})}if(!c.Operation.isValidAmount(this.amount))throw new m("This amount is invalid.");if(void 0!==this.memo&&null!==this.memo){var t=void 0;try{switch(this.memoType){case"MEMO_ID":t="MEMO_ID must be a valid 64 bit unsigned integer",c.Memo.id(this.memo);break;case"MEMO_HASH":t="MEMO_HASH must be a 32 byte hash represented in hexadecimal (A-Z0-9)",c.Memo.hash(this.memo);break;case"MEMO_RETURN":t="MEMO_RETURN must be a 32 byte hash represented in hexadecimal (A-Z0-9)",c.Memo.returnHash(this.memo);break;default:t="MEMO_TEXT must contain a maximum of 28 characters",c.Memo.text(this.memo)}}catch(e){throw new m(t)}}return u.server.loadAccount(this.account.address).then(this.checkMinimumBalance.bind(this)).then(this.checkDestinationExists.bind(this)).catch(function(t){throw"NotFoundError"==t.name?new m("Your account isn't funded."):(console.error(t),new m("Unknown Error"))})}},{key:"send",value:function(){var t=(0,a.default)(s.default.mark(function t(){var e,n,a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.validate();case 2:return e=c.Operation.payment({destination:this.destination,asset:c.Asset.native(),amount:this.amount}),n=this.formatMemo(),(a=new c.TransactionBuilder(this.loadedAccount).addOperation(e).addMemo(n).build()).sign(c.Keypair.fromSecret(this.account.secret)),this.lastTransactionXDR=a.toEnvelope().toXDR().toString("base64"),t.abrupt("return",u.server.submitTransaction(a));case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"resubmit",value:function(){if(null!==this.lastTransactionXDR){var t=new c.Transaction(this.lastTransactionXDR);return u.server.submitTransaction(t)}}}]),t}();e.default=_},OvRC:function(t,e,n){t.exports={default:n("oM7Q"),__esModule:!0}},Ufq7:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,".sendConfirm__address{padding:0}",""])},Zrlr:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},"ic/q":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=u(n("Dd8w")),a=u(n("woOf")),i=u(n("mvHQ")),r=u(n("Xxa5")),o=u(n("exGp")),c=(u(n("M4fF")),u(n("EPgg")));function u(t){return t&&t.__esModule?t:{default:t}}var d={status:void 0,success:void 0,error:void 0,outcomeMessage:void 0,needsResubmit:void 0};e.default={name:"Transaction",middleware:"authenticated",methods:{send:function(){var t=this;return(0,o.default)(r.default.mark(function e(){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!=t.status){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t.status="loading",t.transaction=new c.default(t.account,{to:t.to,amount:t.amount,memo:t.memo}),e.next=7,t.transaction.send();case 7:n=e.sent,console.log("res",n),t.outcomeMessage=n._links.transaction.href,t.resetTransaction({success:!0,status:"sent"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),t.handleError(e.t0);case 17:case"end":return e.stop()}},e,t,[[2,14]])}))()},handleError:function(t){console.error(t),this.error=t,this.success=!1,this.outcomeMessage=(0,i.default)(t,null,"  "),this.status="sent","Transaction Failed"!=t.title&&"Transaction Malformed"!=t.title&&(this.needsResubmit=!0)},resubmitTransaction:function(){var t=this;return(0,o.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.transaction.resubmit();case 3:t.resetTransaction({success:!0,status:"sent"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),t.handleError(e.t0);case 9:case"end":return e.stop()}},e,t,[[0,6]])}))()},resetTransaction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,d,t)}},data:function(){return(0,s.default)({account:this.$store.state.account,showOutcome:!1,to:this.$route.query.to,amount:this.$route.query.amount,memo:this.$route.query.memo,memoType:this.$route.query.memoType||"MEMO_TEXT",transaction:void 0},d,{validationErrors:void 0})}}},mSZW:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("ic/q"),a=n.n(s);for(var i in s)"default"!==i&&function(t){n.d(e,t,function(){return s[t]})}(i);var r=n("sqDW"),o=!1;var c=function(t){o||n("67AM")},u=n("VU/8")(a.a,r.a,!1,c,null,null);u.options.__file="pages/transaction.vue",e.default=u.exports},oM7Q:function(t,e,n){n("sF+V");var s=n("FeBl").Object;t.exports=function(t,e){return s.create(t,e)}},pnVp:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.server=void 0;var s,a=n("Qx8R"),i=(s=a)&&s.__esModule?s:{default:s};e.server=new i.default.Server("https://horizon-testnet.stellar.org");i.default.Network.useTestNetwork()},"sF+V":function(t,e,n){var s=n("kM2E");s(s.S,"Object",{create:n("Yobk")})},sqDW:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"so-back dashboardOverviewBack"},[t.account?n("div",{staticClass:"so-chunk"},[n("div",{staticClass:"dashboardOverviewRow"},[n("p",{staticClass:"dashboardOverviewRow__label"},[t._v("Your balance:")]),n("p",{staticClass:"dashboardOverviewRow__text"},[t._v(t._s(t.account.balanceDisplay)+" lumens")])])]):t._e()]),n("div",{staticClass:"sendConfirm",staticStyle:{padding:"40px"}},[n("p",{staticClass:"sendConfirm__addressLabel"},[t._v("You're sending to this public key:")]),n("p",{staticClass:"sendConfirm__address"},[t._v(t._s(t.to))]),n("div",{staticClass:"sendConfirm__sendingContainer"},[n("div",{staticClass:"sendConfirm__sendingContainer__label"},[t._v("Sending")]),n("div",{staticClass:"sendConfirm__sendingContainer__amount"},[n("span",{staticClass:"sendConfirm__sendingContainer__amount__info"},[t._v(t._s(t.amount))]),n("br"),n("span",{staticClass:"sendConfirm__sendingContainer__amount__label"},[t._v("lumens")])])]),t.memo?n("div",{staticClass:"sendConfirm__sendingContainer"},[n("div",{staticClass:"sendConfirm__sendingContainer__label"},[t._v("Memo")]),n("div",{staticClass:"sendConfirm__sendingContainer__amount"},[n("span",{staticClass:"sendConfirm__sendingContainer__amount__helper"},[t._v(t._s(t.memoType)+":")]),n("br"),n("span",{staticClass:"sendConfirm__sendingContainer__amount__info"},[t._v(t._s(t.memo))])])]):t._e(),t.validationErrors?n("div",{staticClass:"s-alert s-alert--warning"},[n("span",{directives:[{name:"repeat",rawName:"v-repeat",value:t.error in t.validationErrors,expression:"error in validationErrors"}]},[t._v("\n        "+t._s(t.error.message)+" "+t._s(t.error.description)+"\n      ")])]):t._e(),t.success?t._e():n("button",{staticClass:"s-button sendConfirm__submit",attrs:{disabled:"loading"==t.status},on:{click:t.send}},[t._v("Submit transaction")])]),"loading"==t.status?n("div",{staticClass:"sendWaiting"},[t._m(0),n("p",{staticClass:"sendWaiting__status"},[t._v("Submitting transaction to the network...")])]):t._e(),"sent"==t.status?n("div",{staticClass:"sendOutcome"},[t.success?n("div",[n("p",{staticClass:"sendOutcome__label"},[t._v("Transaction successfully completed")])]):t._e(),t.success?t._e():n("div",[n("p",{staticClass:"sendOutcome__label"},[t._v("Transaction failed")]),t.needsResubmit?n("p",{},[n("strong",[t._v("Warning")]),t._v(" We submitted your transaction to the network but because of the network conditions we are\n        not certain about it's status: it could either succeed or fail. Instead of recreating the transaction you should use\n        the button below to safely resubmit the transaction:"),n("br"),n("br"),n("button",{staticClass:"s-button sendConfirm__submit",on:{click:t.resubmitTransaction}},[t._v("Resubmit transaction")])]):t._e(),t.outcomeMessage?n("pre",{staticClass:"sendOutcome__code"},[n("code",[t._v(t._s(t.outcomeMessage))])]):t._e()])]):t._e()])};s._withStripped=!0;var a={render:s,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sendWaiting__rocket"},[e("img",{attrs:{src:"images/sending.gif",alt:"Submitting..."}})])}]};e.a=a},wxAW:function(t,e,n){"use strict";e.__esModule=!0;var s,a=n("C4MV"),i=(s=a)&&s.__esModule?s:{default:s};e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),(0,i.default)(t,s.key,s)}}return function(e,n,s){return n&&t(e.prototype,n),s&&t(e,s),e}}()}});